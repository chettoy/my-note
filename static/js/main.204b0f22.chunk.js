(this["webpackJsonpmy-note"]=this["webpackJsonpmy-note"]||[]).push([[0],{11:function(e,t,n){e.exports={DrawerView:"DrawerView_DrawerView__BuZzI",touching:"DrawerView_touching__1bSJ7",menu:"DrawerView_menu__Mcwfx",content:"DrawerView_content__1cqA8",SpaceView:"DrawerView_SpaceView__1oVIm",preventScroll:"DrawerView_preventScroll__p3Iir"}},16:function(e,t,n){e.exports={toolbarShadow:"Toolbar_toolbarShadow__1_Sld",ToolbarView:"Toolbar_ToolbarView__1S3YH Toolbar_toolbarShadow__1_Sld",Title:"Toolbar_Title__2gZFt",IconFather:"Toolbar_IconFather__1DCrv",MenuIcon:"Toolbar_MenuIcon__3e613 Toolbar_IconFather__1DCrv",SearchIcon:"Toolbar_SearchIcon__o2Nk3 Toolbar_IconFather__1DCrv",SearchView:"Toolbar_SearchView__36OB8 Toolbar_toolbarShadow__1_Sld"}},17:function(e,t,n){e.exports={MrMenu:"Menu_MrMenu__2xDpK",MenuContainer:"Menu_MenuContainer__2OsOu",menuHeader:"Menu_menuHeader__1E8mV",menuFooter:"Menu_menuFooter__3F0rz",copyright:"Menu_copyright__1CD6t"}},18:function(e,t,n){e.exports={FabWrapper:"FloatActionButton_FabWrapper__1EGQW",fabView:"FloatActionButton_fabView__zG0ei",iconWrapper:"FloatActionButton_iconWrapper__2r1Q4",fabMenu:"FloatActionButton_fabMenu__2AcsH"}},31:function(e,t,n){e.exports={BannerWrapper:"Banner_BannerWrapper__1r_G9",BannerView:"Banner_BannerView__3l_3J",con:"Banner_con__3-4Vi",bottom:"Banner_bottom__3dyyR"}},35:function(e,t,n){"use strict";class s{static init(e){s.proxy=e,s.inited=!0}static log(e,t){s.proxy.log(e,t)}static changeTheme(){s.proxy.changeTheme()}static goTo(e){s.proxy.goTo(e)}static toggleViewMode(e,t){s.proxy.toggleViewMode(e,t)}}t.a=s},51:function(e,t,n){"use strict";t.a={autoplay:!1,loadLive2d:!0}},52:function(e,t,n){e.exports={LoadingView:"Loading_LoadingView__1eCfI",delayFadeIn:"Loading_delayFadeIn__3xTOi",shine:"Loading_shine__3ouF6",dotAnim:"Loading_dotAnim__31Ynl"}},56:function(e,t,n){e.exports={CardView:"CardView_CardView__5c3Bv"}},58:function(e){e.exports=JSON.parse('{"app.menu-item.1":[{"type":0,"value":"home"}],"app.menu-item.2":[{"type":0,"value":"item2"}],"app.menu-item.3":[{"type":0,"value":"item3"}],"app.menu-item.close":[{"type":0,"value":"close"}],"app.menu-item.exit":[{"type":0,"value":"exit"}],"app.menu-item.locale":[{"type":0,"value":"locale"}],"app.menu-item.theme":[{"type":0,"value":"theme"}],"app.toolbar.search-placeholder":[{"type":0,"value":"search..."}]}')},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var s=n(0),o=n.n(s),i=n(19),a=n.n(i),r=n(27),c=n(10),h=n(7),l=n(98),d=n(101),u=n(3),m=n(1);class p{static className2s(e){return"."+e.split(" ")[0]}}p.isSnap="ReactSnap"===navigator.userAgent;const g=p.className2s;function b(e){return t=>{const n=Object(u.f)(),s=Object(u.g)(),o=Object(u.h)();return Object(m.jsx)(e,{...t,navigate:s,location:n,params:o})}}function w(e){const t=Object(u.f)();return o.a.useEffect((()=>{e.listenFunc(t)}),[t,e]),null}const f=window.mClientUtils;class j{}j.exit=()=>f&&f.exit("\u2713"),j.open=e=>f&&f.open("\u2713",e),j.toggleMenu=e=>f&&f.toggleOptionsMenu("\u2713",e),j.getStatusBarHeight=()=>f?f.getStatusBarHeight("\u2713")/window.devicePixelRatio:0,j.isClient=-1!==navigator.userAgent.indexOf("; wv) ")&&f;var v=j,_=n(35),x=n(5),O=n.n(x);class T{constructor(){this.__during=1500,this.__timer=null,this.__parent=document.body,this.__view=T.getDefaultView(),this._touchstart=null,this._touchmove=null,this._touchend=null,this._onshowed=null,this._ondismiss=null}static getDefaultView(){let e=document.implementation.createHTMLDocument();return e.body.innerHTML='<div id="SnackBar" style="width:100%;height:3rem;position:fixed;left:0px;bottom:-3rem;z-index:200;background:rgba(244,67,102,0.9);color:white;font-size:1rem;"><span style="line-height:3rem;margin-left:1.25rem;"></span></div>',e.body.children[0]}setDuring(e){return this.__during=e,this}setOnShowed(e){return this._onshowed=e,this}setOnDismiss(e){return this._ondismiss=e,this}setParent(e){return e&&(this.__parent=e),this}setText(e){return this.__view.childNodes[0].textContent=e,this}setTimer(e){this.__during>0&&(e||(e=this.__during),this.__timer=setTimeout((()=>{this.dismiss()}),e))}clearTimer(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null)}dismiss(e,t){let n;if(this.clearTimer(),!1!==e){for(let e=0;e<T.affectedFAB.length;e++){const t=T.affectedFAB[e],n=t.view;"auto"!==t.bottom?O()(n,{bottom:t.bottom},"fast"):"auto"!==t.top&&O()(n,{top:t.top},"fast"),T.affectedFAB.splice(e,1),e--}!0!==e&&(n=e)}t&&(n=t);const s=document.querySelector("#SnackBar");if(s){const e=()=>{s.removeEventListener("touchstart",this._touchstart),s.removeEventListener("touchmove",this._touchmove),s.removeEventListener("touchend",this._touchend),this._touchstart=null,this._touchmove=null,this._touchend=null,s.parentNode.removeChild(s),this._ondismiss&&this._ondismiss(),n&&n()};"none"!==getComputedStyle(s).display&&s.getBoundingClientRect().left<document.documentElement.clientWidth?O()(s,{bottom:-s.offsetHeight+"px"},"fast",e):e()}}show(){if(null!==document.querySelector("#SnackBar"))return void this.dismiss(!1,(()=>{this.show()}));this.__parent.appendChild(this.__view);const e=document.querySelector("#SnackBar");let t,n,s;document.documentElement.clientWidth>800&&(e.style.width="400px",e.style.margin="20px"),e.addEventListener("touchstart",this._touchstart=s=>(this.clearTimer(),t=parseInt(getComputedStyle(e).left),n=s.targetTouches[0].pageX,!1)),e.addEventListener("touchmove",this._touchmove=o=>(s=o.targetTouches[0].pageX,s>n&&(e.style.left=t+s-n+"px"),!1)),e.addEventListener("touchend",this._touchend=t=>(parseInt(getComputedStyle(e).left)>document.documentElement.clientWidth/3?O()(e,{left:document.documentElement.clientWidth+"px"},(()=>{this.dismiss()})):(O()(e,{left:0},"ease"),null===this.__timer&&this.setTimer(1500)),!1)),(document.documentElement.clientWidth>800||!("ontouchstart"in window))&&(e.onclick=()=>{this.clearTimer(),O()(e,{opacity:0},(()=>this.dismiss()))});const o=document.querySelectorAll(".fab");Array.prototype.forEach.call(o,(function(t,n){if("fixed"===getComputedStyle(t).position&&document.documentElement.clientHeight-t.getBoundingClientRect().top-t.offsetHeight<e.offsetHeight&&t.getBoundingClientRect().left<e.getBoundingClientRect().left+e.offsetWidth){const n={};n.view=t,n.top=getComputedStyle(t).top,n.bottom=getComputedStyle(t).bottom;const s=e.offsetHeight+parseFloat(getComputedStyle(e)["margin-bottom"]);"auto"!==n.bottom?O()(t,{bottom:parseFloat(n.bottom)+s+"px"}):"auto"!==n.top?O()(t,{top:parseFloat(n.top)-s+"px"}):O()(t,{bottom:s+"px"});let o=!1;for(const e in T.affectedFAB)T.affectedFAB[e].view===n.view&&(o=!0);o||T.affectedFAB.push(n)}})),"function"===typeof this._onshowed?O()(e,{bottom:0},(()=>{setTimeout(this._onshowed,0)})):O()(e,{bottom:0}),this.setTimer()}static make(e,t,n){return(new T).setParent(e).setText(t).setDuring(n)}}T.affectedFAB=[],T.LENGTH_SHORT=1500,T.LENGTH_LONG=3e3,T.LENGTH_IMMEDIATE=-1;var M=T;class C{constructor(){this._context=null,this._duration=1500,this._view=C.getDefaultView(),this._deadtime=0,this._domPtr=null}static getContainerView(){let e=document.implementation.createHTMLDocument();return e.body.innerHTML='<div id="SuperToast" style="position:fixed;bottom:3rem;z-index:200;"></div>',e.body.children[0]}static getDefaultView(){let e=document.implementation.createHTMLDocument();return e.body.innerHTML='<div style="opacity:0;background:rgba(244,67,102,0.9);color:white;font-size:1rem;"></div>',e.body.children[0]}static _handle(){const e=Date.now();let t=0;for(let n=0;n<C._queue.length;n++){const s=C._queue[n]._deadtime;if(e>=s){const e=C._queue[n]._domPtr;O()(e,{opacity:0},(()=>{const t=document.querySelector("#SuperToast");t.removeChild(e),null===t.children[0]&&t.parentNode.removeChild(t)})),C._queue.splice(n,1),n--}else(s<t||!t)&&(t=s)}0!==t?(C._timer=setTimeout(C._handle,t-e),C._nextHandleTime=t):(C._timer=null,C._nextHandleTime=0)}setContext(e){return this._context=e,this}setText(e){return this._view.textContent=e,this}setDuration(e){return this._duration=e,this}show(){document.querySelector("#SuperToast")||document.body.appendChild(C.getContainerView());const e=document.querySelector("#SuperToast");if(e.children[0]?e.insertBefore(this._view,e.children[0]):e.appendChild(this._view),this._deadtime=Date.now()+this._duration,this._domPtr=e.children[0],C._queue.push(this),O()(this._domPtr,{opacity:1}),C._timer){if(!(this._deadtime<C._nextHandleTime))return;clearTimeout(C._timer)}C._timer=setTimeout(C._handle,this._duration),C._nextHandleTime=this._deadtime}static makeText(e,t,n){return(new C).setContext(e).setText(t).setDuration(n)}}C._timer=null,C._queue=[],C._nextHandleTime=0,C.LENGTH_SHORT=1500,C.LENGTH_LONG=3e3;var S=C,y=n(52),L=n.n(y);class k extends o.a.Component{render(){return Object(m.jsxs)("div",{className:L.a.LoadingView,children:[Object(m.jsx)("span",{}),Object(m.jsx)("span",{}),Object(m.jsx)("span",{}),Object(m.jsx)("span",{children:"loading..."}),Object(m.jsx)("span",{}),Object(m.jsx)("span",{}),Object(m.jsx)("span",{})]})}}var D,B,E=k,F=n(36),H=n(28),I=n.n(H),N=n(29),P=n(16),V=n.n(P);const A=h.default.div.attrs({className:V.a.ToolbarView})(D||(D=Object(c.a)(["\n  position: ",";\n  top: ","px;\n  \n  ",",\n  "," {\n    color: ",";\n  }\n  \n  "," {\n    a { color: ","; }\n  }\n  \n  "," {\n    top: calc(","px + 3.125rem);\n    background: rgba(255,255,255,0.6);\n    input {\n      box-shadow: 0 0.125rem grey;\n    }\n    input:focus {\n      box-shadow: 0 0.125rem #FF4081;\n    }\n  }\n"])),(e=>e.toolbarAttach?"absolute":"fixed"),(e=>e.statusBarHeight),g(V.a.MenuIcon),g(V.a.SearchIcon),(e=>e.theme.ToolbarIconColor),g(V.a.Title),(e=>e.theme.TitleColor),g(V.a.SearchView),(e=>e.statusBarHeight)),W=h.default.div(B||(B=Object(c.a)(["\n  background: ",";\n  display: ",";\n  height: ","px;\n  width: 100%;\n  position: fixed;\n  top: 0;\n"])),(e=>e.theme.StatusBarColor),(e=>e.statusBarHeight?"block":"none"),(e=>e.statusBarHeight));W.defaultProps={theme:{StatusBarColor:"black"}},A.defaultProps={theme:{ToolbarIconColor:"white",TitleColor:"white"},statusBarHeight:0,toolbarAttach:!1};class R extends o.a.Component{constructor(e){super(e),this.canvas=null,this.handleMenuClick=()=>{this.props.onMenuClick&&this.props.onMenuClick()},this.handleSearchClick=()=>{this.state.atTop&&_.a.log("(\uff61>\ufe4f<\uff61)","\u770b\u4e0d\u89c1\u6211\u770b\u4e0d\u89c1\u6211~"),this.setState({showSearch:!this.state.showSearch})},this.handleSearch=e=>{e.preventDefault();const t=e.target[0].value;this.props.onSearch&&this.props.onSearch(t)},this.handleResize=()=>{this.canvas.resize()},this.handleScroll=()=>{const e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;this.state.atTop&&e>10?this.setState({atTop:!1}):e<10&&!this.state.atTop&&this.setState({atTop:!0})},this.state={menuIconHover:!1,atTop:!0,showSearch:!1},this.canvas=new X}render(){const{intl:e}=this.props;return Object(m.jsxs)(A,{statusBarHeight:this.props.statusBarHeight,toolbarAttach:this.props.toolbarAttach,children:[Object(m.jsx)(W,{statusBarHeight:this.props.statusBarHeight}),Object(m.jsx)("span",{className:V.a.MenuIcon,onClick:this.handleMenuClick,onMouseEnter:()=>this.setState({menuIconHover:!0}),onMouseLeave:()=>this.setState({menuIconHover:!1}),style:{backgroundColor:this.state.menuIconHover?"rgba(85,85,85,1)":"rgba(0,0,0,0)"},children:Object(m.jsx)(I.a,{path:N.c})}),Object(m.jsx)("span",{className:V.a.Title,children:Object(m.jsx)("a",{href:".",children:"MyNote"})}),Object(m.jsx)("span",{className:V.a.SearchIcon,onClick:this.handleSearchClick,style:{opacity:this.state.atTop&&!this.props.toolbarAttach?0:1},children:Object(m.jsx)(I.a,{path:N.b})}),Object(m.jsx)("div",{className:V.a.SearchView,style:{display:this.state.showSearch?"block":"none"},children:Object(m.jsx)("form",{action:"#",method:"get",onSubmit:this.handleSearch,children:Object(m.jsx)("input",{type:"search",name:"search",placeholder:e.formatMessage({id:"app.toolbar.search-placeholder",defaultMessage:"search...",description:"placeholder text"}),autoFocus:this.state.showSearch,autoComplete:"off","x-webkit-speech":"true"})})}),Object(m.jsx)("canvas",{ref:e=>this.canvas.is(e)})]})}componentDidMount(){window.addEventListener("resize",this.handleResize),this.props.toolbarAttach||window.addEventListener("scroll",this.handleScroll),this.canvas.init(),setTimeout(this.handleResize,20)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.props.toolbarAttach||window.removeEventListener("scroll",this.handleScroll)}}class X{constructor(){this.canvas=null,this.ctx=null,this.width=null,this.height=null,this.loop=null,this.headerHeight=0,this.prevScroll=0,this.drawLoopLock=0,this.staticTime=0,this.delayTime=0,this.raf=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame).bind(window),this.is=e=>{this.canvas=e},this.init=()=>{this.ctx=this.canvas.getContext("2d")},this.resize=()=>{if(this.headerHeight=document.documentElement.clientHeight,!this.canvas)return;const e=this.canvas.getBoundingClientRect();this.width=e.width,this.height=e.height,this.canvas.width=this.width,this.canvas.height=this.height,this.draw(),0===this.drawLoopLock&&(this.raf(this.drawLoop),this.drawLoopLock=1)},this.fill=e=>{this.ctx.fillStyle=e,this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillRect(0,0,this.width,this.height)},this.draw=()=>{if(document.body.classList.contains("x"))this.fill("#000");else{const e=this.scrollTop();let t=1;this.headerHeight&&(t=e/this.headerHeight,t=t.toFixed(2),t>1&&(t=0)),this.fill("rgba(69, 157, 245, ".concat(t,")"))}},this.drawLoop=()=>{const e=this.scrollTop();this.prevScroll===e?(this.staticTime++,100===this.staticTime||this.staticTime>9999999&&(this.staticTime=101)):(this.staticTime=0,(this.prevScroll-this.headerHeight)*(e-this.headerHeight)<0&&(this.delayTime=60),0===this.delayTime&&this.draw(),this.prevScroll=e),this.delayTime>0&&(this.delayTime--,this.delayTime),this.raf(this.drawLoop)},this.animate=()=>{let e=0;this.loop=setInterval((()=>{this.ctx.fillStyle="rgba(".concat(5*e,", ").concat(5*e,", 255, 1.0)"),this.ctx.fillRect(0,0,this.width,this.height),e++,40===e&&(clearInterval(this.loop),this.draw())}),30)},this.scrollTop=()=>document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop}}var z,q=Object(F.c)(R),G=n(17),U=n.n(G);const J=h.default.div.attrs({className:U.a.MrMenu})(z||(z=Object(c.a)(["\n  background: ",";\n  \n  "," span {\n    color: ",";\n  }\n  \n  ul li {\n    color: ",";\n  }\n  \n  ul li.active {\n    color: ",";\n    background: ",";\n  }\n  \n  "," {\n    a:link{color:rgba(0,0,0,0.54);}\n    a:visited{color:rgba(0,0,0,0.54);}\n    a:hover{color:#0a0;}\n    a:active{color:#0a0;}\n  }\n  \n  "," {\n    color: ",";\n  }\n"])),(e=>e.theme.MenuBackground),g(U.a.menuHeader),(e=>e.theme.MenuHeaderTextColor),(e=>e.theme.MenuTextColor),(e=>e.theme.ItemActiveTextColor),(e=>e.theme.ItemActiveColor),g(U.a.menuFooter),g(U.a.copyright),(e=>e.theme.MenuTextColor));J.defaultProps={theme:{MenuBackground:"rgba(255,255,255,0.87)",MenuHeaderTextColor:"white",MenuTextColor:"rgba(0,0,0,0.87)",ItemActiveTextColor:"#2196f3",ItemActiveColor:"#ddd"}};class Y extends o.a.Component{render(){return Object(m.jsxs)(J,{ref:e=>{this.props.getDOM&&this.props.getDOM(e)},children:[Object(m.jsx)("div",{className:U.a.menuHeader,children:Object(m.jsx)("span",{children:"menu"})}),Object(m.jsxs)("div",{className:U.a.MenuContainer,children:[this.props.children,Object(m.jsx)("div",{className:U.a.menuFooter,children:Object(m.jsx)("span",{className:U.a.copyright,children:"\xa9 me"})})]})]})}}class $ extends o.a.Component{constructor(e){super(e),this.getItemList=()=>{let e=0;return o.a.Children.map(this.props.children,(t=>t?o.a.cloneElement(t,{key:e,className:this.state.currentIndex===e?"active":"",onClick:e=>{this.handleItemClick(e),t.props.onClick&&t.props.onClick(e)},index:e++}):null))},this.handleItemClick=e=>{this.setState({currentIndex:parseInt(e.currentTarget.getAttribute("index"))})},this.state={currentIndex:0}}render(){return Object(m.jsx)("ul",{children:this.getItemList()})}}var K=Y,Q=n(11),Z=n.n(Q);class ee extends o.a.Component{constructor(){super(...arguments),this.raf=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame).bind(window),this.menuDOM=null,this.spaceDOM=null,this.conDOM=null,this.bigScreen=!1,this.menuPosX=-316,this.menuTempOpen=!1,this._menuMoveMode="transform",this._menuMoving=!1,this.preventScrollMode=(()=>{const e=navigator.userAgent;return e.indexOf("Gecko/")>-1&&e.indexOf("Firefox/")>-1?"firefox":"default"})(),this.getChildren=e=>o.a.Children.map(this.props.children,(e=>e.type===q?o.a.cloneElement(e,{onMenuClick:this.toggleMenu}):e.type===K?o.a.cloneElement(e,{getDOM:e=>this.menuDOM=e}):e.props&&"content"===e.props.className?o.a.cloneElement(e,{ref:e=>this.conDOM=e}):e)),this.handleResize=e=>{const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;console.log("resize(".concat(t,", ").concat(n,")")),this.bigScreen=t>550,this.menuWidth=this.menuDOM.getBoundingClientRect().width,e?this.moveBack():this.stepTo(-this.menuWidth)},this.prevTouchMenuPosX=null,this.menuTouchFromX=null,this.menuTouchMoveX=null,this.menuTouchPrevX=null,this.menuPrevLoopTime=null,this.menuDragSpeed=0,this.preventScroll=!1,this.touchMoveLoop=()=>{if(null==this.menuTouchFromX)return;if(null==this.menuTouchMoveX)return void this.raf(this.touchMoveLoop);let e=this.prevTouchMenuPosX+this.menuTouchMoveX-this.menuTouchFromX;e<-this.menuWidth&&(e=-this.menuWidth),e>0&&(e=0),this.stepTo(e);const t=Date.now();this.menuDragSpeed=(this.menuTouchMoveX-this.menuTouchPrevX)/(t-this.menuPrevLoopTime),this.menuTouchPrevX=this.menuTouchMoveX,this.menuPrevLoopTime=t,this.raf(this.touchMoveLoop)},this.handleTouchStart=e=>{const t=e.targetTouches[0];this.prevTouchMenuPosX=this.menuPosX,t.pageX<this.prevTouchMenuPosX+this.menuWidth+20&&t.pageY>50&&(t.pageX>this.prevTouchMenuPosX+this.menuWidth-1&&e.preventDefault(),this.menuTouchFromX=t.pageX,this.menuTouchPrevX=this.menuTouchFromX,this.menuDOM.classList.add(Z.a.touching),this.spaceDOM.classList.add(Z.a.touching),this.conDOM.classList.add(Z.a.touching),this.beforeOpenMenu(),this.menuPrevLoopTime=Date.now(),this.raf(this.touchMoveLoop))},this.handleTouchMove=e=>{const t=e.targetTouches[0];null!=this.menuTouchFromX&&(this.menuTouchMoveX=t.pageX)},this.handleTouchEnd=e=>{if(null!=this.menuTouchFromX){if(this.menuTouchFromX=null,this.menuTouchMoveX=null,this.menuTouchPrevX=null,this.prevTouchMenuX=null,this.menuDOM.classList.remove(Z.a.touching),this.spaceDOM.classList.remove(Z.a.touching),this.conDOM.classList.remove(Z.a.touching),Math.abs(this.menuDragSpeed)>.5){const e=this.menuDragSpeed>0?0:-this.menuWidth,t=Math.abs((e-this.menuPosX)/this.menuDragSpeed);this.animateTo(e,t>50?t:50,(t=>{e===-this.menuWidth&&t&&this.afterCloseMenu()}))}else this.moveBack();this.menuPrevLoopTime=null,this.menuDragSpeed=0}},this.handleMouseMove=e=>{0===e.pageX&&(0===this.menuPosX||this._menuMoving||(this.openMenu(),this.menuTempOpen=!0))},this.onMouseLeaveMenu=e=>{this.menuTempOpen&&"close"!==this._menuMoving&&(this.closeMenu(),this.menuTempOpen=!1)},this.stepTo=e=>{this.menuPosX=e,"transform"===this._menuMoveMode?this.menuDOM.style.transform="translate3d(".concat(e,"px,0,0)"):this.menuDOM.style.left=e+"px",this.spaceDOM.style.opacity="".concat(e/this.menuWidth+1),this.bigScreen&&(this.conDOM.style.width=document.body.offsetWidth-(e+this.menuWidth)+1+"px")},this.animateTo=(e,t,n)=>{let s=300,o=null;"number"===typeof t&&(s=t),"function"===typeof t&&(o=t),"function"===typeof n&&(o=n);const i=e=>{this._menuMoving=null,o&&o(e)};let a;a="open"===e?0:"close"===e?-this.menuWidth:e;const r=this.menuPosX,c=a-r;this._menuMoving=e,O()(this.spaceDOM,"stop",!0),O()(this.spaceDOM,{tween:[0,1]},{duration:s,easing:[.4,0,.2,1],begin:()=>{this.bigScreen?this.conDOM.style.width=document.body.offsetWidth-(a+this.menuWidth)+1+"px":this.conDOM.style.width="100%"},progress:(e,t,n,s,o)=>{if(null===o)return;const a=r+c*(1-o);this.stepTo(a),this.menuTouchFromX&&(O()(this.spaceDOM,"stop",!0),i(!1))},complete:()=>{i(!0)}})},this.moveBack=e=>{this.menuPosX>1*-this.menuWidth/2?this.openMenu(e):this.closeMenu(e)},this.isMenuOpen=()=>0===this.menuPosX,this.beforeOpenMenu=()=>{if(!this.bigScreen&&("block"!==this.spaceDOM.style.display&&(this.spaceDOM.style.display="block"),"firefox"!==this.preventScrollMode)){const e=document.body;e.classList.contains(Z.a.preventScroll)||e.classList.add(Z.a.preventScroll)}},this.afterCloseMenu=()=>{if("none"!==this.spaceDOM.style.display&&(this.spaceDOM.style.display="none"),"firefox"!==this.preventScrollMode){const e=document.body;e.classList.contains(Z.a.preventScroll)&&e.classList.remove(Z.a.preventScroll)}},this.openMenu=e=>{this.beforeOpenMenu(),this.animateTo("open",e)},this.closeMenu=e=>{this.animateTo("close",(t=>{t&&this.afterCloseMenu(),e&&e(t)}))},this.toggleMenu=()=>{this.isMenuOpen()?this.closeMenu():this.openMenu()}}render(){return Object(m.jsxs)("div",{className:Z.a.DrawerView,children:[this.getChildren(),Object(m.jsx)("div",{className:Z.a.SpaceView,ref:e=>this.spaceDOM=e,onTouchStart:()=>this.closeMenu()})]})}componentDidMount(){"transform"===this._menuMoveMode?this.menuDOM.style.transform="translate3d(".concat(this.menuPosX,"px,0,0)"):this.menuDOM.style.left=this.menuPosX+"px",this.menuDOM.classList.add(Z.a.menu),this.conDOM.classList.add(Z.a.content),window.addEventListener("resize",this.handleResize),document.body.addEventListener("touchstart",this.handleTouchStart,{passive:"firefox"!==this.preventScrollMode}),document.body.addEventListener("touchmove",this.handleTouchMove),document.body.addEventListener("touchend",this.handleTouchEnd),document.body.addEventListener("mousemove",this.handleMouseMove),this.menuDOM.addEventListener("mouseleave",this.onMouseLeaveMenu),setTimeout(this.handleResize,20)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),document.body.removeEventListener("touchstart",this.handleTouchStart),document.body.removeEventListener("touchmove",this.handleTouchMove),document.body.removeEventListener("touchend",this.handleTouchEnd),document.body.removeEventListener("mousemove",this.handleMouseMove),this.menuDOM.addEventListener("mouseleave",this.onMouseLeaveMenu)}}var te,ne=ee,se=n(18),oe=n.n(se);const ie=h.default.div.attrs({className:oe.a.FabWrapper})(te||(te=Object(c.a)(["\n  "," {\n    background: ",";\n  }\n  "," svg {\n    fill: ",";\n  }\n  "," div {\n    background: ",";\n   }\n"])),g(oe.a.fabView),(e=>e.theme.FabColor),g(oe.a.iconWrapper),(e=>e.theme.FabIconColor),g(oe.a.fabMenu),(e=>e.theme.FabMenuColor));ie.defaultProps={theme:{FabColor:"#FF4081",FabIconColor:"white",FabMenuColor:"#66ccff"}};class ae extends o.a.Component{constructor(e){super(e),this.menuDOM=null,this.fabChild=null,this.onClickHandler=()=>{const e=!this.state.isOpen,t=200/this.fabChild.length;this.setState({isOpen:e}),this.fabChild.forEach(((n,s)=>{O()(n,"stop",!0),O()(n,e?"fadeIn":"fadeOut",{duration:200,delay:t*s})}))},this.state={isOpen:!1}}render(){return Object(m.jsxs)(ie,{className:"fab",children:[Object(m.jsx)("div",{className:oe.a.fabView,onClick:this.onClickHandler,children:Object(m.jsx)("div",{className:oe.a.iconWrapper,children:Object(m.jsx)(I.a,{path:N.a,rotate:this.state.isOpen?360:315})})}),Object(m.jsx)("div",{className:oe.a.fabMenu,ref:e=>this.menuDOM=e,children:this.props.children})]})}componentDidMount(){const e=this.menuDOM.parentNode,t=[...this.menuDOM.childNodes];this.fabChild=t,this.menuDOM.style.left="auto",this.menuDOM.style.top="auto",t.forEach(((e,t)=>{e.style.left="auto",e.style.top="auto"}));const n=e.getBoundingClientRect();t[0].style.display="block";const s=t[0].getBoundingClientRect();t[0].style.display="none",this.menuDOM.style.left=n.left+e.offsetWidth/2-(s.left+s.width/2)+"px",this.menuDOM.style.top=n.top+e.offsetHeight/2-(s.top+s.height/2)+n.height+"px";const o=90/(t.length-1);t.forEach(((e,t)=>{e.style.left=-Math.cos(o*t*Math.PI/180)*n.width*1.2+"px",e.style.top=-Math.sin(o*t*Math.PI/180)*n.width*1.2+"px"}))}}var re=ae,ce=n(31),he=n.n(ce);class le extends o.a.Component{constructor(e){super(e),this.state={loaded:!1}}render(){return Object(m.jsx)("div",{className:he.a.BannerWrapper,children:Object(m.jsxs)("header",{className:he.a.BannerView,children:[Object(m.jsxs)("span",{className:he.a.con,children:[Object(m.jsx)("span",{children:"..."}),Object(m.jsx)("br",{}),Object(m.jsx)("i",{children:"under construction"})]}),Object(m.jsx)("span",{className:he.a.bottom,children:this.state.loaded||Object(m.jsx)(E,{})})]})})}componentDidMount(){window.addEventListener("resize",(()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))})),this.setState({loaded:!0})}}var de=le;const ue="/my-note/live2d-widget/";class me{}me.proxy=null,me.load=()=>{return(e=ue+"live2d.min.js",t="js",new Promise(((n,s)=>{let o;"css"===t?(o=document.createElement("link"),o.rel="stylesheet",o.href=e):"js"===t&&(o=document.createElement("script"),o.src=e),o&&(o.async=!1,o.onload=()=>n(e),o.onerror=()=>s(e),document.head.appendChild(o))}))).then((()=>n.e(4).then(n.bind(null,688)))).then((e=>{let{loadWidget:t}=e;return t({waifuPath:ue+"waifu-tips.json",apiPath:"https://live2d.fghrsh.net/api/"})})).then((e=>{me.proxy=e}));var e,t},me.showMessage=e=>{me.proxy.showMessage(e,5e3,8)};var pe,ge=me,be=n(100),we=n(99),fe=n(56),je=n.n(fe);const ve=h.default.div.attrs({className:je.a.CardView})(pe||(pe=Object(c.a)(["\n  background: ",";\n  color: ",";\n"])),(e=>e.theme.CardColor),(e=>e.theme.TextColor));ve.defaultProps={theme:{CardColor:"white",TextColor:"black"}};var _e,xe=ve;var Oe=Object(h.default)(xe)(_e||(_e=Object(c.a)(["\n  position: absolute;\n  top: calc(","px + 3.125rem);\n  left: 50%;\n  transform: translate(-50%,0);\n  min-height: 50vh;\n  width: 40rem;\n  max-width: 100%;\n  @media screen and (min-width: 100rem) {\n    width: 50rem;\n  }\n"])),v.getStatusBarHeight());function Te(){return console.log("Test Page"),Object(m.jsx)(Oe,{children:Object(m.jsx)("p",{children:"test page"})})}function Me(e){const t=Object(u.g)();return o.a.useEffect((()=>{setTimeout((()=>{t(e.to)}),200)}),[]),Object(m.jsx)(Oe,{children:Object(m.jsxs)("p",{children:['Redirecting to "',e.to,'".']})})}var Ce=n(57),Se=n.n(Ce),ye=n(40),Le=n(25),ke=n.n(Le);class De{constructor(e,t){this.__id=null,this.__content=null,this.__html=null,this.__title=null,t?this.__initFromCon(e,t):this.__parseFromJSON(e)}__initFromCon(e,t){this.__id=e,this.__content=t;const n=/^(-{3,})\n((\w+): ([\S\s]*?)\n)+\1\n\n/.exec(t);if(null!=n&&n.length>1){const e=n[0].split("\n"),s=/^(\w+): (['"]?)([\S\s]*)\2$/,o=new Map;let i;for(let t=1;t<e.length-3;t++)i=s.exec(e[t]),i&&i.length>3&&o.set(i[1],i[3]);o.has("title")&&(this.__title=o.get("title")),this.__html=this.__process(t.substr(n[0].length))}else{this.__html=this.__process(t);const e=/^\s*<h([1-3])[\s\S]*>([\s\S]*)<\/h\1>/.exec(this.__html);null!=e&&e.length>2&&(this.__title=e[2])}}__parseFromJSON(e){if("string"===typeof e&&(e=JSON.parse(e)),!("id"in e&&"con"in e&&"html"in e))throw console.log(e),new Error("invalid ConData json");this.__id=e.id,this.__content=e.con,this.__html=e.html,e.title&&(this.__title=e.title)}__process(e){const t=new ye.marked.Tokenizer,n=t.codespan;return t.codespan=function(e){const t=e.match(/(\$+)([^$\n]+?)\1/);return t?{type:"html",raw:t[0],text:ke.a.renderToString(t[2].trim(),{displayMode:"$$"===t[1],throwOnError:!1})}:n.apply(this,arguments)},Object(ye.marked)(e,{tokenizer:t})}getState(){return{id:this.__id,con:this.__content,html:this.__html,title:this.__title}}toString(){return JSON.stringify(this.getState())}getHtml(){return this.__html}getId(){return this.__id}getSource(){return this.__content}getTitle(){return this.__title}static parse(e){return new De(e)}}var Be=De;var Ee,Fe=class{constructor(){this.conDataCache=null,this.path=/.*\//.exec(window.location.pathname)+"content"}loadContent(e,t){const n="_id_".concat(e);if(this._checkCache(),this.conDataCache.has(n)){const e=this.conDataCache.get(n);if(null!==e)return void(t&&t(200,e,!0))}Se.a.get("".concat(this.path,"/").concat(e,".md")).then((s=>{const o=new Be(e,s.data);this.conDataCache.set(n,o),t&&t(s.status,o,!1)})).catch((n=>{if(!n.response)throw n;404!==n.response.status&&console.log("load con[id=".concat(e,"]: ").concat(n)),t&&t(n.response.status,null,!1)}))}_loadItems(e){return new Promise(((t,n)=>{let s=0;const o=()=>{this.loadContent(s,((i,a,r)=>{200===i?(e(i,a,r),s++,s>10?n("over 10 content"):o()):404===i||0===i?t():n(i)}))};this.loadContent("header",(e=>{200===e&&o()}))}))}reqUpdate(e){return new Promise(((t,n)=>{this._loadItems(((t,n,s)=>{s||e(n,[...this.conDataCache.values()])})).then((()=>{console.log("content loaded"),this._saveCache(),t()})).catch((e=>{console.log("content load error: "+e),n(e)}))}))}reqCache(e){this._checkCache(),e([...this.conDataCache.values()])}_saveCache(){if(null===this.conDataCache)return;if(!window.sessionStorage)return;const e=[];for(const[,t]of this.conDataCache)e.push(t.getState());sessionStorage.setItem("con_cache",JSON.stringify(e))}_checkCache(){if(null!==this.conDataCache)return;if(this.conDataCache=new Map,!window.sessionStorage)return;const e=sessionStorage.getItem("con_cache");if(!e)return;JSON.parse(e).forEach(((e,t)=>{const n=new Be(e),s="_id_".concat(n.getId());this.conDataCache.has(s)||this.conDataCache.set(s,n)}))}},He=n(30),Ie=n.n(He);const Ne=Object(h.default)(xe).attrs({className:"typo"})(Ee||(Ee=Object(c.a)(["\n  font-size: 1rem;\n  line-height: 1.5em;\n  \n  a.post-title-link {\n    color: #2196f3;\n    border-bottom-color: #2196f3;\n    margin: 1rem 0;\n    display: inline-block;\n  }\n  \n  p {\n    white-space: pre-line;\n  }\n  \n  pre {\n    background: ",";\n    overflow: auto;\n  }\n  \n  strong, b,\n  h1, h2, h3, h4, h5, h6,\n  em, legend, caption {\n    color: ",";\n  }\n  \n  width: 40rem;\n  max-width: 100%;\n  \n  @media screen and (min-width: 90rem) {\n    width: 50rem;\n  }\n  @media screen and (min-width: 120rem) {\n    width: 70rem;\n  }\n"])),(e=>e.theme.PreBlockBackground),(e=>e.theme.TextEmColor));Ne.defaultProps={theme:{PreBlockBackground:"#f8f8f8",TextEmColor:"#000"}};var Pe=Ne;class Ve extends o.a.Component{constructor(){super(...arguments),this.onPreviewClick=()=>{this.props.previewClickCallback&&this.props.previewClickCallback()}}render(){const{data:e}=this.props,t=e.getTitle();if(t){let n=Ie.a.sanitize(e.getHtml(),{ALLOWED_TAGS:[],KEEP_CONTENT:!0});return n.substring(0,t.length)===t&&(n=n.substring(t.length,t.length+n.length).trim()),n.length>100&&(n="".concat(n.substring(0,100),"...")),Object(m.jsxs)(Pe,{...this.props,children:[Object(m.jsx)(r.b,{className:"con-preview post-title-link",to:"id/".concat(e.getId()),onClick:this.onPreviewClick,children:t}),Object(m.jsx)("p",{className:"con-preview",children:n})]})}{const t=Ie.a.sanitize(e.getHtml());return Object(m.jsx)(Pe,{...this.props,dangerouslySetInnerHTML:{__html:t}})}}}var Ae=b(Ve);class We extends o.a.Component{constructor(e){super(e),this.mounted=!1,this.state={conList:[],loading:!0}}componentDidMount(){var e,t;this.mounted=!0,this.setState({loading:!1});const n=this.props.conLoader;n.reqCache((e=>{this.mounted&&this.setState({conList:e})}));const s=null!==(e=null===(t=window.sessionStorage)||void 0===t?void 0:t.getItem("conListUpdateTime"))&&void 0!==e?e:0;console.log("lastUpdateTime: "+s),Math.abs(Date.now()-s)<12e4||(console.log("updating content..."),n.reqUpdate(((e,t)=>{this.mounted&&this.setState({conList:t})})).then((()=>{window.sessionStorage&&sessionStorage.setItem("conListUpdateTime",Date.now())})))}componentWillUnmount(){this.mounted=!1,this.props.onSaveState&&this.props.onSaveState()}render(){return this.state.loading?Object(m.jsx)(E,{}):this.state.conList.map(((e,t)=>Object(m.jsx)(Ae,{data:e,previewClickCallback:()=>{this.props.onClickItem&&this.props.onClickItem(e.getId())}},e.getId())))}}var Re=We;function Xe(e){const t=e.conId,n=e.conLoader,[o,i]=Object(s.useState)(null);return Object(s.useEffect)((()=>(n.loadContent(t,((e,t,s)=>{200===e&&t?(i(Ie.a.sanitize(t.getHtml(),{ADD_TAGS:["semantics","annotation"]})),s||n._saveCache()):i("<p>Failed to load (".concat(e,")</p>"))})),()=>{})),[t,n]),null===o?Object(m.jsx)(E,{}):Object(m.jsx)(Pe,{dangerouslySetInnerHTML:{__html:o}})}var ze,qe=o.a.memo(Xe);n(95),n(91),n(92);const Ge=Object(h.default)(Oe)(ze||(ze=Object(c.a)(["\n  background: transparent;\n  box-shadow: none;\n  margin: 0;\n  padding: 0;\n  width: auto;\n  height: auto;\n  @media screen and (max-width:549px) {\n    padding: 0 0.375rem;\n  }\n"])));class Ue extends o.a.Component{constructor(e){super(e),this.onLocationChanged=e=>{this.currentView=this.matchCurrentLocation(e),this.currentLocation=e,this.currentView===this.routes.detail.name?O()(this.getWrapperDOM(),"scroll"):this.currentView===this.routes.list.name?this.recoverScroll():O()(this.getWrapperDOM(),"scroll",{duration:500})},this.loader=new Fe,this.viewRef=o.a.createRef(),this.routes={list:{name:"list",path:"/"},detail:{name:"detail",path:"/id/:id"}},this.matchCurrentLocation=e=>{let{pathname:t}=e;return Object(u.d)(this.routes.detail.path,t)?this.routes.detail.name:Object(u.d)(this.routes.list.path,t)?this.routes.list.name:""},this.currentView=this.matchCurrentLocation(e.location),this.currentLocation=e.location}getWrapperDOM(){return this.viewRef.current.parentNode}getTop(e){const t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;return e.parentNode.getBoundingClientRect().top+t}saveScroll(){const e="conPageScroll_"+this.currentView,t=this.getWrapperDOM();window.sessionStorage[e]=-t.getBoundingClientRect().top}recoverScroll(){const e="conPageScroll_"+this.currentView;if(!(e in window.sessionStorage))return;const t=this.getWrapperDOM();O()(t,"scroll",{offset:window.sessionStorage[e]})}componentDidMount(){this._scrollRestoration=window.history.scrollRestoration,window.history.scrollRestoration="manual",this.recoverScroll()}componentWillUnmount(){window.history.scrollRestoration=this._scrollRestoration}render(){const e=o.a.createRef();let t=this.props.location,n=this.matchCurrentLocation(t);t!==this.currentLocation&&""===n&&(t=this.currentLocation,n=this.matchCurrentLocation(t),this.saveScroll());const s=t.pathname;return Object(m.jsxs)("div",{ref:this.viewRef,children:[Object(m.jsx)(w,{listenFunc:this.onLocationChanged}),Object(m.jsx)(be.a,{component:null,children:Object(m.jsx)(we.a,{nodeRef:e,classNames:"router",timeout:500,children:Object(m.jsxs)(Ge,{ref:e,children:[this.routes.list.name===n&&Object(m.jsx)(Re,{...this.props,conLoader:this.loader,onClickItem:()=>this.saveScroll()}),this.routes.detail.name===n&&Object(m.jsx)(qe,{...this.props,conLoader:this.loader,conId:Object(u.d)(this.routes.detail.path,s).params.id})]})},s)})]})}}var Je=b(Ue);function Ye(){return Object(m.jsx)(Oe,{children:Object(m.jsx)("p",{children:"settings page"})})}function $e(){return Object(m.jsxs)(Oe,{children:[Object(m.jsx)("h2",{children:"Dashboard"}),Object(m.jsx)("span",{style:{float:"right"},children:Object(m.jsx)("i",{children:"test"})}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{children:"something.."})]})}class Ke extends o.a.Component{constructor(e){super(e),this.notes=[]}render(){return Object(m.jsxs)(Oe,{children:[Object(m.jsx)("span",{children:"note list"}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{children:"todo.."})]})}}var Qe=Ke;const Ze=o.a.lazy((()=>n.e(2).then(n.t.bind(null,689,7))));class et extends o.a.Component{render(){return Object(m.jsx)(Oe,{children:Object(m.jsx)(o.a.Suspense,{fallback:Object(m.jsx)(E,{}),children:Object(m.jsx)(Ze,{dark:this.props.theme.isDark,defaultValue:"Hello world!"})})})}}var tt=Object(h.withTheme)(et);class nt extends o.a.Component{render(){return Object(m.jsxs)(Oe,{children:[Object(m.jsx)("span",{children:"timeline"}),Object(m.jsx)("hr",{}),Object(m.jsx)("span",{children:"todo.."})]})}}var st=nt;function ot(){const e=o.a.createRef(),t=Object(u.f)(),n="/"===(s=t.pathname)||s.startsWith("/id/")?"con":s;var s;return Object(m.jsx)(be.a,{className:"CardWrapper",children:Object(m.jsx)(we.a,{nodeRef:e,classNames:"router",timeout:500,children:Object(m.jsx)("div",{ref:e,children:Object(m.jsxs)(u.c,{location:t,children:[Object(m.jsx)(u.a,{path:"/",element:Object(m.jsx)(Je,{})}),Object(m.jsx)(u.a,{path:"/id/:id",element:Object(m.jsx)(Je,{})}),Object(m.jsx)(u.a,{path:"/dash",element:Object(m.jsx)($e,{})}),Object(m.jsx)(u.a,{path:"/settings",element:Object(m.jsx)(Ye,{})}),Object(m.jsx)(u.a,{path:"/notebook",element:Object(m.jsx)(Qe,{})}),Object(m.jsx)(u.a,{path:"/editor",element:Object(m.jsx)(tt,{})}),Object(m.jsx)(u.a,{path:"/timeline",element:Object(m.jsx)(st,{})}),Object(m.jsx)(u.a,{path:"/test",element:Object(m.jsx)(Te,{})}),Object(m.jsx)(u.a,{path:"/404",element:Object(m.jsx)("div",{children:"Not Found"})}),Object(m.jsx)(u.a,{path:"*",element:Object(m.jsx)(Me,{to:"/"})})]})})},n)})}var it=o.a.memo(ot),at=n(58);var rt={isDark:!0,AppBackground:"#282c34",CardColor:"rgba(32,33,36,0.92)",TextColor:"rgba(255,255,255,0.87)",TextEmColor:"#fff",FabColor:"#ff4081",FabIconColor:"white",FabMenuColor:"#66ccff",MenuBackground:"rgba(255,255,255,0.87)",MenuHeaderTextColor:"white",MenuTextColor:"rgba(0,0,0,0.87)",ItemActiveTextColor:"#2196f3",ItemActiveColor:"#ddd",PreBlockBackground:"transparent",StatusBarColor:"#2196f3",ToolbarIconColor:"white",TitleColor:"white"};var ct,ht={isDark:!1,AppBackground:"url('https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302'),#e0e0e0",CardColor:"rgba(255,255,255,1.0)",TextColor:"rgba(0,0,0,0.87)",TextEmColor:"#000",FabColor:"#ff4081",FabIconColor:"white",FabMenuColor:"#66ccff",MenuBackground:"rgba(255,255,255,0.87)",MenuHeaderTextColor:"white",MenuTextColor:"rgba(0,0,0,0.87)",ItemActiveTextColor:"#2196f3",ItemActiveColor:"#ddd",PreBlockBackground:"#f8f8f8",StatusBarColor:"#2196f3",ToolbarIconColor:"black",TitleColor:"white"},lt=n(51);n(93);const dt=o.a.lazy((()=>n.e(5).then(n.bind(null,686)))),ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.LENGTH_SHORT;S.makeText(null,e,t).show()},mt=h.default.canvas.attrs({className:"bg"})(ct||(ct=Object(c.a)(["\n  background: ",";\n"])),(e=>e.theme.AppBackground));mt.defaultProps={theme:{AppBackground:"#e0e0e0"}};class pt{constructor(){this.loadSet=new Set}getNProgress(){const e=window.NProgress;if(e)return e;console.log("NProgress not found")}newToLoad(e){if(this.loadSet.has(e))return;this.loadSet.add(e);const t=this.getNProgress();t.isStarted()||t.start()}loaded(e){if(!this.loadSet.has(e))return;this.loadSet.delete(e);const t=this.getNProgress();this.loadSet.size>0?t.inc():t.done()}}class gt extends o.a.Component{constructor(e){super(e),this.handleSearch=e=>{const t=/#([\w\-.]+)=(.+)/.exec(e);if(null!=t&&t.length>2){const e=t[1],n=t[2];switch(e){case"href":v.open(n)||(window.location.href=n);break;case"id":this.goTo("/id/"+n)}}ut("search "+e)},this.drawerView=null,this.themeList=[ht,rt],this.progress=new pt,this.progress.newToLoad("app"),this.progress.newToLoad("background"),this.state={isLoading:!0,isViewMode:!1,currentLocale:"en",currentTheme:0,localeMessages:{en:at}},_.a.init({context:this,log:(e,t)=>{const n="[".concat(e,"] ").concat(t);console.log(n),S.makeText(this,n,S.LENGTH_LONG).show()},changeTheme:()=>{this.changeTheme()},goTo:e=>{this.goTo(e)},toggleViewMode:(e,t)=>{!0!==e&&!1!==e||this.setState({isViewMode:e},t)}})}getTheme(){return this.themeList[this.state.currentTheme]}changeLocale(){if("en"===this.state.currentLocale){const e=this.state.localeMessages;e.zh?this.setState({currentLocale:"zh"}):(this.progress.newToLoad("lang-zh"),n.e(6).then(n.t.bind(null,687,3)).then((t=>{this.progress.loaded("lang-zh"),e.zh=t.default,this.setState({currentLocale:"zh",localeMessages:e})})))}else this.setState({currentLocale:"en"})}changeTheme(){this.state.currentTheme<this.themeList.length-1?this.setState({currentTheme:this.state.currentTheme+1}):this.setState({currentTheme:0})}goTo(e){e!==this.props.location.pathname&&("/"===e?this.props.navigate(-1):this.props.navigate(e))}render(){return Object(m.jsx)(l.a,{locale:this.state.currentLocale,defaultLocale:"en",messages:this.state.localeMessages[this.state.currentLocale],children:Object(m.jsx)(h.ThemeProvider,{theme:this.getTheme(),children:Object(m.jsxs)(ne,{ref:e=>this.drawerView=e,children:[Object(m.jsx)(mt,{}),Object(m.jsx)(q,{statusBarHeight:v.getStatusBarHeight(),toolbarAttach:this.state.isViewMode,onSearch:this.handleSearch}),Object(m.jsxs)(Y,{children:[Object(m.jsx)(o.a.Suspense,{fallback:Object(m.jsx)(E,{}),children:this.state.isLoading?null:Object(m.jsx)(dt,{})}),Object(m.jsxs)($,{children:[Object(m.jsx)("li",{onClick:()=>this.goTo("/"),children:Object(m.jsx)(d.a,{id:"app.menu-item.1",defaultMessage:"home",description:"menu item1"})}),Object(m.jsx)("li",{onClick:()=>{M.make(null,"test",-1).setOnShowed(this.drawerView.closeMenu).show(),setTimeout(this.drawerView.closeMenu,2e3)},children:Object(m.jsx)(d.a,{id:"app.menu-item.2",defaultMessage:"item2",description:"menu item2"})}),Object(m.jsx)("li",{onClick:()=>{document.body.classList.contains("x")?document.body.classList.remove("x"):document.body.classList.add("x")},children:Object(m.jsx)(d.a,{id:"app.menu-item.3",defaultMessage:"item3",description:"menu item3"})}),Object(m.jsx)("li",{onClick:()=>this.changeTheme(),children:Object(m.jsx)(d.a,{id:"app.menu-item.theme",defaultMessage:"theme",description:"menu item theme"})}),Object(m.jsx)("li",{onClick:()=>this.changeLocale(),children:Object(m.jsx)(d.a,{id:"app.menu-item.locale",defaultMessage:"locale",description:"menu item locale"})}),v.isClient&&Object(m.jsx)("li",{onClick:()=>v.exit(),children:Object(m.jsx)(d.a,{id:"app.menu-item.exit",defaultMessage:"exit",description:"menu item exit"})}),Object(m.jsx)("li",{onClick:()=>this.drawerView.closeMenu(),children:Object(m.jsx)(d.a,{id:"app.menu-item.close",defaultMessage:"close",description:"menu item close"})})]})]}),Object(m.jsxs)("main",{className:"content",children:[Object(m.jsxs)(re,{children:[Object(m.jsx)("div",{onClick:()=>ut("test"),children:"1"}),Object(m.jsx)("div",{onClick:()=>this.goTo("/test"),children:"2"}),Object(m.jsx)("div",{onClick:()=>this.setState({isViewMode:!this.state.isViewMode}),children:"3"})]}),this.state.isViewMode||Object(m.jsx)(de,{}),this.state.isLoading||Object(m.jsx)(it,{})]})]})})})}componentDidMount(){this.setState({isLoading:!1}),this.progress.loaded("app"),(()=>{const e=this.getTheme().AppBackground.match(/url\((['"])(.+)\1\)/);if(!e)return!0;const t=e[2],n=new Image;return n.src=t,!!n.complete||(n.onload=()=>{this.progress.loaded("background")},!1)})()&&this.progress.loaded("background"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.querySelectorAll("style[data-styled]");2===e.length&&e[0].innerHTML&&!e[1].innerHTML&&e[0].parentNode.removeChild(e[0])}();(navigator.language||navigator.browserLanguage).toLowerCase().indexOf("zh")>=0&&"en"===this.state.currentLocale&&this.changeLocale();const e=()=>{const e="sessionStorage"in window&&null!==window.sessionStorage;e&&void 0!==sessionStorage.show_welcome||setTimeout((()=>{e&&(sessionStorage.show_welcome=!0),M.make(this.drawerView.conDOM,"Welcome",M.LENGTH_LONG).show()}),1500)};lt.a.loadLive2d?ge.load().then((()=>{setTimeout(e,1e3)})):e()}}var bt=b(gt);const wt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ft(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}const jt=Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(r.a,{children:Object(m.jsx)(bt,{})})}),vt=document.getElementById("root");vt.hasChildNodes()?a.a.hydrate(jt,vt):a.a.render(jt,vt),function(e){if("serviceWorker"in navigator){if(new URL("/my-note",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/my-note","/service-worker.js");wt?(!function(e,t){fetch(e).then((n=>{const s=n.headers.get("content-type");404===n.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):ft(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):ft(t,e)}))}}()}},[[94,1,3]]]);
//# sourceMappingURL=main.204b0f22.chunk.js.map